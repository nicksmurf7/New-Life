<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<link rel="stylesheet" type="text/css" href="style.css">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>New Life </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script language="javascript">
    var num= 1;
    $(document).ready(function() {
        create_num_form(1);
        document.forms[0].numids.onchange = function() {
            num = this.value;
            create_num_form(this.value);

        }
        document.forms[0].email.onchange = function() {
            check_email();

        }
        document.forms[0].ethnicity.onchange = function() {
            change_enthnicity()

        }
        document.forms[0].eyecolor.onchange = function() {
            change_eyecolor()

        }
        
    })

    function validate() {
        return check_email();
    }

    function check_email() {
        var check = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
        var ine = $("input[name='email']").val();

        if(ine.match(check)) {
           
            document.getElementById("alert").innerHTML = '<p> <br></p>';
            return true;
        }
       
        document.getElementById("alert").innerHTML = '<p style = "color:red;">Error: Invalid Email Inputted</p>';
        return false;
    }

   
    function create_num_form(num) {
        var info = "";
        for(i = 0; i < num; i++) {
            info += "<div class = 'box'><p>Please select your sex:</p>" + "<input type=\"radio\" id=\"male\" name=\"sex" + i + "\" value=\"male\">";
            info += "<label for=\"male\">Male</label><br><input type=\"radio\" id=\"female\" name=\"sex" + i + "\"value=\"female\">";
            info += '<label for="female">Female</label><br> <input type="radio" id="other" name="sex' + i + '""value="other" > <label for="other">Other</label><br><br>';
            info +='<input type="radio" style="display:none;" name="sex' + i + '"value="" checked> ';
            info += '<label for = "nationality"> Please select your nationality: </label><select name = "nationality' + i + '" id = "nationality">';
            info += `
                    <option value = "" checked> Random </option>
                    <option value = "au"> Australia </option>
                    <option value = "br"> Brazil </option>
                    <option value = "ca"> Canada </option>
                    <option value = "ch"> China </option>
                    <option value = "de"> Germany </option>
                    <option value = "dk"> Denmark </option>
                    <option value = "es"> Spain </option>
                    <option value = "fi"> Finland </option>
                    <option value = "fr"> France </option>
                    <option value = "gb"> United Kingdom </option>
                    <option value = "ie"> Ireland </option>
                    <option value = "ir"> Iran </option>
                    <option value = "no"> Norway </option>
                    <option value = "nl"> Netherlands </option>
                    <option value = "nz"> New Zeland </option>
                    <option value = "tr"> Turkey </option>
                    <option value = "us"> United States </option>
                    </select> </br> </br>
                `;
            info += '<label for = "ethnicity"> Please select your ethnicity: </label><select name = "ethnicity' + i + '" id = "ethnicity" onchange ="change_enthnicity()">';
            info += `
                    <option value = "" checked> Random </option>
                    <option value = "white"> White </option>
                    <option value = "asian"> Asian </option>
                    <option value = "black"> Black </option>
                    <option value = "latino"> Latino </option>
                    </select> </br> </br>
                `
            info += '<label for = "eyecolor"> Please select your eye color: </label><select name = "eyecolor' + i + '" id = "eyecolor" onchange ="change_eyecolor()">';
            info += `
                        <option value = "" checked> Random </option>
                        <option value = "brown"> Brown </option>
                        <option value = "blue" > Blue </option>
                        <option value = "grey" > Grey </option>
                        <option value = "green"> Green </option>
                        </select> </br> </br>
                        <label for = "donor"> Please tell us whether or not you are an organ donor </label>  </br>
                            <p> `;
            info += '<input type="radio" name="donor' + i + '" value="notdonor"/> Not an Organ Donor  ';
            info += '<input type="radio" name="donor' + i + '"value = "donor" /> Organ Donor';
            info += '<input type="radio" name="donor' + i + '"value = "Random" style = "display:none;"checked/></p></div>';
            info += '<label for = "age"> Please enter your age: </label> <input type = 'text' id = "age" name = "age" + i>;
        }
        document.getElementById("person").innerHTML = info;
    }


    function change_enthnicity() {
            for(i= 0; i< num ; i++){
                value = $( "select[name='ethnicity"+i +"']" ).val();
                if(value == 'black'|| value == 'asian' || value == 'latino' ) {
                    $("select[name =eyecolor"+i +"] option[value= 'blue']").hide();
                    $("select[name =eyecolor"+i +"] option[value= 'green']").hide();
                    $("select[name =eyecolor"+i +"] option[value= 'grey']").hide();
                }
                else{
                   $( "select[name =eyecolor"+i +"] option[value= 'blue']").show();
                    $("select[name =eyecolor"+i +"] option[value= 'green']").show();
                    $("select[name =eyecolor"+i +"] option[value= 'grey']").show();
                }

            }
            
        }

    function change_eyecolor() {
            for(i= 0; i< num ; i++){
                value = $( "select[name='eyecolor"+i +"']" ).val();
                if(value == 'brown' || value == '') {
                    $("select[name =ethnicity"+i +"] option[value= 'latino']").show();
                    $("select[name =ethnicity"+i +"] option[value= 'asian']").show();
                    $("select[name =ethnicity"+i +"] option[value= 'black']").show();
                }
                else{
                    $("select[name =ethnicity"+i +"] option[value= 'latino']").hide();
                    $("select[name =ethnicity"+i +"] option[value= 'asian']").hide();
                    $("select[name =ethnicity"+i +"] option[value= 'black']").hide();
                    
                }

            }
            
        }
    </script>
</head>
<h1>Welcome to your New Life!</h1>

<body>
    <form method="post" action="https://comp20finalproject.000webhostapp.com/Final/ID_CARD.php" onsubmit="return validate()" >
        
        <p>Email: &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;<input type="text" name='email' required /></p>
        <div id = 'alert'><p> <br></p></div>
        <label for="numids1"> Please select the number of IDs you need: </label>
        <select name="numids" id="numids">
            <option value="1"> 1 </option>
            <option value="2"> 2 </option>
            <option value="3"> 3 </option>
            <option value="4"> 4 </option>
            <option value="5"> 5 </option>
            <option value="6"> 6 </option>
        </select>
        <div class="person" id="person">
        </div>
        <input type="submit" value="Submit">
    </form>
    
</body>
